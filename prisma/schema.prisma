generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
}

model Website {
  id        String      @id @default(cuid())
  url       String      @unique
  createdAt DateTime    @default(now())

  logs      UptimeLog[]

  @@map("websites")
}

model UptimeLog {
  id           String   @id @default(cuid())
  websiteId    String
  status       Boolean
  responseTime Int?     // null on timeout/error
  httpStatus   Int?
  checkedAt    DateTime @default(now())

  website      Website  @relation(fields: [websiteId], references: [id], onDelete: Cascade)

  @@index([websiteId])
  @@index([websiteId, checkedAt])  // critical for fast stats & charts
  @@map("uptime_logs")
}